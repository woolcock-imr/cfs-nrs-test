<section id=form_container__ID>
    <div id=header__ID>
		Restorative Sleep Questionnaire Weekly Version (RSQ-D)
	</div>
	<form id=F__ID>
        <div class="container">
            <div class="row row__ID" id=row_participant__ID>
				<div class="col-sm-12 col-lg-9 input__ID">
					<span class=label__ID>Participant</span><br>
					<input name="Participant" class=form-control id=Participant__ID data-id="Participant">
				</div>
				<div class="col-sm-12 col-lg-3 input__ID">
					<span class=label__ID>Participant ID</span><br>
					<input name="Participant_uid" class=form-control readonly>
				</div>
				<hr style="border-top: 1px solid #888;width: 100%;margin:10px 0">
			</div>
            <div class="row">
                <div class=col>
                  The following questions ask about how you felt when you woke up and started the day during the past 7 DAYS. When answering the questions think of how you felt about thirty minutes after getting out of bed to start the day<br><br>
                  <br>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>


            <div class="row">
                <div class=col>
                  For each question below, please select the number that best indicates how you feel (Please select one number for each question)</div>
            </div>
            <div class="row">
                <div class=col>
                  To what extent do you feel....
            </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row" style='padding-top:50px'>
                <div class=col-lg-6></div>
                <div class=col-lg-6>
                    <div class=row>
                        <div class=col-3>Not at all</div>
                        <div class=col-3>A little bit</div>
                        <div class=col-3>Some</div>
                        <div class=col-3>Very Much</div>
                        <div class=col-3>Completely</div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>1.Tired?</div>
                <div class=col-lg-6>
                    <div class=row>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D1" value=0 required><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D1" value=1><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D1" value=2><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D1" value=3><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D1" value=3><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>

            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>2.Sleepy?</div>
                <div class=col-lg-6>
                    <div class=row>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D2" value=1 required><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D2" value=2><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D2" value=3><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D2" value=4><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D2" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>3.in a good mood?</div>
                <div class=col-lg-6>
                    <div class=row>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D3" value=1 required><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D3" value=2><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D3" value=3><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D3" value=4><div class="num__ID"></div></label></div>
                        <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D3" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>4.rested?</div>
                <div class=col-lg-6>
                    <div class=row>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D4" value=1 required><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D4" value=2><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D4" value=3><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D4" value=4><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D4" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>5.Refreshed and Restored?</div>
                <div class=col-lg-6>
                    <div class=row>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D5" value=1 required><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D5" value=2><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D5" value=3><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D5" value=4><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D5" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>6. Ready to start the day?</div>
                <div class=col-lg-6>
                    <div class=row>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D6" value=1 required><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D6" value=2><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D6" value=3><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D6" value=4><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D6" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>7.Energetic?</div>
                <div class=col-lg-6>
                    <div class=row>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D7" value=1 required><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D7" value=2><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D7" value=3><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D7" value=4><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D7" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>8.Mentally alert?</div>
                <div class=col-lg-6>
                    <div class=row>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D8" value=1 required><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D8" value=2><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D8" value=3><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D8" value=4><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D8" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>
            <hr style='border-top:1px solid #000;margin:0'></hr>
            <div class="row">
                <div class=col-lg-6>9.grouchy?</div>
                <div class=col-lg-6>
                    <div class=row>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D9" value=1 required><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D9" value=2><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D9" value=3><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D9" value=4><div class="num__ID"></div></label></div>
                      <div class=col-3><label class=cont__ID><input type="radio" name="RSQ_D9" value=5><div class="num__ID"></div></label></div>
                    </div>
                </div>
            </div>

            <hr style='border-top:1px solid #000;margin:0'></hr>
            <br>
			<div class="row">
				<div class=col>
					<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
				</div>
			</div>
    	</div>
    </form>
</section>
<script>
	function F__ID(){
		//-------------------------------------
    VmInclude:__CURRENT_PATH__/task.form.js
    VmInclude:__COMPONENT__/grid/form.v3.js
    var _task_fields;
		//-------------------------------------
       var on_load=function(){
            $('#F__ID input[name=PSQI5j]').triggerHandler('change');
            $('#F__ID input[name=PSQI10e]').triggerHandler('change');
            $('#F__ID input[name=PSQI10]').triggerHandler('click');
        }
        //-------------------------------------
        $('#F__ID input[name=PSQI5j]').change(function(){
            if($(this).val()=='')  $('#F__ID input[name=PSQI5ji]').prop('checked',false).prop('disabled',true).prop('required',false);
            else                   $('#F__ID input[name=PSQI5ji]').prop('disabled',false).prop('required',true);
        })
        $("#F__ID input[name='PSQI10']").click(function(){
            var ip=$('input:radio[name=PSQI10]:checked').val();
            if(ip=="2" || ip=="3"){
                $("#F__ID input[name='PSQI10a']").prop('disabled',false).prop('required',true);
                $("#F__ID input[name='PSQI10b']").prop('disabled',false).prop('required',true);
                $("#F__ID input[name='PSQI10c']").prop('disabled',false).prop('required',true);
                $("#F__ID input[name='PSQI10d']").prop('disabled',false).prop('required',true);
                $("#F__ID input[name='PSQI10e']").prop('disabled',false)
                //$("#F__ID input[name='PSQI10ei']").prop('disabled',false)
                $('#F__ID input[name=PSQI10e]').triggerHandler('change');
            }
            else{
                $("#F__ID input[name='PSQI10a']").prop('disabled',true).prop('required',false).prop('checked',false);
                $("#F__ID input[name='PSQI10b']").prop('disabled',true).prop('required',false).prop('checked',false);
                $("#F__ID input[name='PSQI10c']").prop('disabled',true).prop('required',false).prop('checked',false);
                $("#F__ID input[name='PSQI10d']").prop('disabled',true).prop('required',false).prop('checked',false);
                $("#F__ID input[name='PSQI10e']").prop('disabled',true); $("#F__ID input[name='PSQI10e']").val('');
                $("#F__ID input[name='PSQI10ei']").prop('disabled',true).prop('required',false).prop('checked',false);
            }
        })
        $("#F__ID input[name='PSQI10e']").change(function(){
            if($(this).val()=='') $("#F__ID input[name='PSQI10ei']").prop('disabled',true).prop('required',false).prop('checked',false);
            else                  $("#F__ID input[name='PSQI10ei']").prop('disabled',false).prop('required',true);
        })
        //-------------------------------------
		var before_submit=function(record,dbv){
            var vpsqi1=0;
            var v4=parseFloat(record.PSQI4);
            if(v4>=7) vpsqi1=0;
            if(v4<7 && v4>=6) vpsqi1=1;
            if(v4<6 && v4>=5) vpsqi1=2;
            if(v4<5) vpsqi1=3;
            record.PSQIDURAT=vpsqi1.toString();
            var pqsi5j="0";
    		if(record.PSQI5j=='') pqsi5j="0"; else pqsi5j=record.PSQI5ji;
    		var vpsqi2=parseInt(record.PSQI5b)+parseInt(record.PSQI5c)+parseInt(record.PSQI5d)+parseInt(record.PSQI5e)+parseInt(record.PSQI5f)+parseInt(record.PSQI5g)+parseInt(record.PSQI5h)+parseInt(record.PSQI5i)+parseInt(pqsi5j);
            if(vpsqi2==0) record.PSQIDISTB="0";
    		if(vpsqi2>=1 && vpsqi2<=9) record.PSQIDISTB="1";
    		if(vpsqi2>9 && vpsqi2<=18) record.PSQIDISTB="2";
    		if(vpsqi2>18) record.PSQIDISTB="3";

            var vpsqi3=0;
            var v2=parseInt(record.PSQI2)
    		if(v2>=0 && v2<=15) vpsqi3=0;
    		if(v2>15 && v2<=30) vpsqi3=1;
    		if(v2>30 && v2<=60) vpsqi3=2;
    		if(v2>60) vpsqi3=3;
            var v5i=parseInt(record.PSQI5a)
    		if((vpsqi3+v5i)==0) record.PSQILATEN="0";
    		if((vpsqi3+v5i)>=1 && (vpsqi3+v5i)<=2) record.PSQILATEN="1";
    		if((vpsqi3+v5i)>=3 && (vpsqi3+v5i)<=4) record.PSQILATEN="2";
    		if((vpsqi3+v5i)>=5 && (vpsqi3+v5i)<=6) record.PSQILATEN="3";

            var v18i=parseInt(record.PSQI8)
            var v19i=parseInt(record.PSQI9)
    		if((v18i+v19i)==0) record.PSQIDAYDYS="0";
    		if((v18i+v19i)>=1 && (v18i+v19i)<=2) record.PSQIDAYDYS="1";
    		if((v18i+v19i)>=3 && (v18i+v19i)<=4) record.PSQIDAYDYS="2";
    		if((v18i+v19i)>=5 && (v18i+v19i)<=6) record.PSQIDAYDYS="3";

            var startTime = record.PSQI1;
            var endTime = record.PSQI3;

            var startTimeArray = startTime.split(":");
            var startInputHrs = parseInt(startTimeArray[0]);
            var startInputMins = parseInt(startTimeArray[1]);

            var endTimeArray = endTime.split(":");
            var endInputHrs = parseInt(endTimeArray[0]);
            var endInputMins = parseInt(endTimeArray[1]);

            var startMin = startInputHrs*60 + startInputMins;
            var endMin = endInputHrs*60 + endInputMins;

            var result;

            if (endMin < startMin) {
               var minutesPerDay = 24*60;
               result = minutesPerDay - startMin;  // Minutes till midnight
               result += endMin; // Minutes in the next day
            } else {
              result = endMin - startMin;
            }
            var v4=parseInt(record.PSQI4)*60*100;
            var vpsqi4=v4/result;
            if(vpsqi4>=85) record.PSQIHSE="0";
    		if(vpsqi4<85 && vpsqi4>=75) record.PSQIHSE="1";
    		if(vpsqi4<75 && vpsqi4>=65) record.PSQIHSE="2";
    		if(vpsqi4<65) record.PSQIHSE="3";
            record.PSQISLPQUAL=record.PSQI6;
    		record.PSQIMEDS=record.PSQI7;
            record.PSQI=(
                parseInt(record.PSQIDURAT)+
                parseInt(record.PSQIDISTB)+
                parseInt(record.PSQILATEN)+
                parseInt(record.PSQIDAYDYS)+
                parseInt(record.PSQIHSE)+
                parseInt(record.PSQISLPQUAL)+
                parseInt(record.PSQIMEDS)
            ).toString();
		}
		//-------------------------------------
	}
</script>
<style>
	#F__ID div span{
		display:inline-block;
		padding-bottom:5px;
	}
	#F__ID div label{
		display:inline-block;
	}
	#D__ID{
		height:100%;
		overflow:auto;
		animation: vm_module_fadein 1.0s;
		background-color:#fff;
	}
    #form_container__ID{
        margin-top:20px;
		max-width: 960px;
		margin-left: auto;
		margin-right: auto;

		font-family: Verdana,sans-serif;
    	font-size: 15px;
    	line-height: 1.5;
	}
	#form_container__ID .row__ID{
		padding:6px 5px;
	}
	#form_container__ID .row__ID:hover{
		background-color: #ddd;
	}
	#header__ID{
		background-color:#727b84;
		color:#fff;
		padding:10px 15px 10px 15px;
		font-size:120%;
        border:1px solid #bbb;
        border-bottom-width: 0;
	}
	#F__ID{
		border:1px solid #bbb;
        border-top-width: 0;
		padding:6px 15px 20px 15px;
		margin-bottom:200px;
	}
	#F__ID fieldset {
	    border: 0px solid #c0c0c0;
	    margin: 0;
	    padding: 0;
	}
	@media screen and (max-width:768px){
		#form_container__ID{
			padding:20px 10px 50px 10px;
		}
	}
    .C__ID {
        background-color: #ccc;
    }
	.label__ID{
	}
	.radio__ID{
		padding-left:40px;
	}
	.radio__ID label{
		cursor:pointer;
		margin: 0;
	}
    .num__ID{
        display:inline-block;
	    height: 20px;
	    width: 20px;
	    border: 0px solid #000;
        border-radius: 10%;
        text-align: center!important;
        vertical-align: middle;
        line-height: 18px;
        /*margin-top:15px;*/
        margin-left:15px;
        background-color: #ddd;
        color:#ddd;
    }
    #F__ID input:checked ~ .num__ID {
	    background-color: #6da59a;
	}
    .num__ID:hover{
        background-color: #888;
        cursor:pointer;
    }
    .cont__ID{
        display: block;
        position: relative;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .cont__ID input {
        position: absolute;
        opacity: 0;
    }
    @media screen and (max-width:600px){
        .num__ID{
            margin-top:10px;
            margin-right:10px;
        }
	}
</style>
